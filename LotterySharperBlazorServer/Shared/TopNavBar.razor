@using System.IO
@inject Lotto649Service lotto649Service

<div class="topnavbar">
    <div class="logo-container">
        <a class="home-link">LotterySharper</a>
    </div>
    <div class="topnav-links">
        <div class="btn-group" style="width:100%">
            <button style="width:33.3%" type="button" id="app-btn" class="dropdown-btn">
                Lotto649
                <div id="menu" class="topdropdown-menu">

                    <a class="menu-link" @onclick="OnClick649Async">Lotto649 Results</a>
                    <a class="menu-link" @onclick="OnClick649SinglesAsync">Lotto649 Single-Number Frequency</a>
                    <a class="menu-link" @onclick="OnClick649PairsAsync">Lotto649 Pairs Frequency</a>
                    <a class="menu-link" @onclick="OnClick649TripletsAsync">Lotto649 Triplets Frequency</a>
                    <a class="menu-link" @onclick="OnClick649BonusAsync">Lotto649 Bonus Number Frequency</a>
                </div>
            </button>
            <button style="width:33.3%" type="button" id="app-btn" class="dropdown-btn">
                LottoMax
                <div id="menu" class="topdropdown-menu" style="margin-left:-33.3%">
                    <a class="menu-link" href="#">LottoMax Results</a>
                    <a class="menu-link" href="#">LottoMax Single-Number Frequency</a>
                    <a class="menu-link" href="#">LottoMax Pairs Frequency</a>
                    <a class="menu-link" href="#">LottoMax Triplets Frequency</a>
                </div>
            </button>
            <button style="width:33.3%" type="button" id="app-btn" class="dropdown-btn">
                US Powerball
                <div id="menu" class="topdropdown-menu" style="margin-left:-66.6%">
                    <a class="menu-link" href="#">Powerball Results</a>
                    <a class="menu-link" href="#">Powerball Single-Number Frequency</a>
                    <a class="menu-link" href="#">Powerball Pairs Frequency</a>
                    <a class="menu-link" href="#">Powerball Triplets Frequency</a>
                </div>
            </button>
        </div>
    </div>
</div>
<!-- TODO: Make smaller and cause it to disappear when a button is clicked.-->
<main class="@cover">
    <div class="title-container">
        <h1 class="page-header">@welcome</h1>
        <p>@welcome2</p>
    </div>
</main>

@code {
    // TODO: Better welcome system than this. Use CSS to hide content or something maybe?
    string welcome2 = "Please select from one of the options above";
    string welcome = "Welcome to Lottery Sharper";
    string cover = "cover";
    string jsonString;
    string _lotteryName;

    protected async Task OnClick649Async()
    {

        jsonString = await lotto649Service.GetLotto649Async();
        await OnClick649.InvokeAsync(jsonString);
        cover = "cover cover-modified";
        welcome = null;
        welcome2 = null;

    }

    protected async Task OnClick649SinglesAsync()
    {
        _lotteryName = "Lotto 649";
        jsonString = await lotto649Service.GetLotto649SinglesAsync();
        await OnClick649Singles.InvokeAsync(jsonString);
        await OnClickSetName.InvokeAsync(_lotteryName);
        cover = "cover cover-modified";
        welcome = null;
        welcome2 = null;

    }

    protected async Task OnClick649PairsAsync()
    {
        _lotteryName = "Lotto 649";
        jsonString = await lotto649Service.GetLotto649PairsAsync();
        await OnClick649Pairs.InvokeAsync(jsonString);
        await OnClickSetName.InvokeAsync(_lotteryName);
        cover = "cover cover-modified";
        welcome = null;
        welcome2 = null;

    }
    protected async Task OnClick649TripletsAsync()
    {
        _lotteryName = "Lotto 649";
        jsonString = await lotto649Service.GetLotto649TripletsAsync();
        await OnClick649Triplets.InvokeAsync(jsonString);
        await OnClickSetName.InvokeAsync(_lotteryName);
        cover = "cover cover-modified";
        welcome = null;
        welcome2 = null;

    }

    protected async Task OnClick649BonusAsync()
    {
        _lotteryName = "Lotto 649";
        jsonString = await lotto649Service.GetLotto649BonusAsync();
        await OnClick649Bonus.InvokeAsync(jsonString);
        await OnClickSetName.InvokeAsync(_lotteryName);
        cover = "cover cover-modified";
        welcome = null;
        welcome2 = null;

    }
    [Parameter] public EventCallback<String> OnClick649 { get; set; }
    [Parameter] public EventCallback<String> OnClick649Singles { get; set; }
    [Parameter] public EventCallback<String> OnClick649Pairs { get; set; }
    [Parameter] public EventCallback<String> OnClick649Triplets { get; set; }
    [Parameter] public EventCallback<String> OnClick649Bonus { get; set; }
    [Parameter] public EventCallback<String> OnClickSetName { get; set; }

}
